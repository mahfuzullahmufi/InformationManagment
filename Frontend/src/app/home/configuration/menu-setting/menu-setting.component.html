<div fxLayout="column" fxLayoutGap="0px" fxLayoutAlign="space-between none" id="goUp" #goUp>
  <div>
    <nb-card size="medium">
      <nb-card-header class="header-section">Menu Settings</nb-card-header>
      <nb-card-body>
        <form [formGroup]="form" (ngSubmit)="onSave()">
          <div class="row m-1 p-1">
            <div class="col-sm-2">
              <label class="col-form-label">Is Parent:</label>
            </div>
            <div class="col-sm-6">
              <nb-checkbox status="basic" formControlName="isParent" (checkedChange)="checkboxChangeParent($event)"></nb-checkbox>
            </div>
          </div>
          <div class="row m-1 p-1" *ngFor="let field of formFields">
            <div class="col-sm-2">
              <label class="col-form-label">{{ field.label }}: <span>*</span></label>
            </div>
            <div class="col-sm-6">
              <input *ngIf="field.type !== 'select'" [type]="field.type" class="form-control" fullWidth nbInput [placeholder]="field.placeholder" [formControlName]="field.controlName">
              <nb-select *ngIf="field.type === 'select' && !form.get('isParent').value" fullWidth [formControlName]="field.controlName" [placeholder]="field.placeholder">
                <nb-option *ngFor="let item of parentMenuList" [value]="item.key">{{ item.value }}</nb-option>
              </nb-select>
              <div *ngIf="(submitted && form.get(field.controlName).hasError('required')) || (form.get(field.controlName).hasError('required') && form.get(field.controlName).touched)" class="text-danger" padding>
                <div>Please Enter {{ field.label }}</div>
              </div>
            </div>
          </div>
          <div class="row m-1 p-1">
            <div class="col-sm-2">
              <label class="col-form-label">Roles: <span>*</span></label>
            </div>
            <div class="col-sm-6">
              <nb-select fullWidth multiple formControlName="roleId" placeholder="Select Roles">
                <nb-option *ngFor="let role of roleList" [value]="role.key">{{ role.value }}</nb-option>
              </nb-select>
              <div *ngIf="(submitted && form.get('roleId').hasError('required')) || (form.get('roleId').hasError('required') && form.get('roleId').touched)" class="text-danger" padding>
                <div>Please Select Roles</div>
              </div>
            </div>
          </div>
          <div class="row m-1 p-1"></div>
          <div class="row m-1 p-1">
            <div class="col-sm-2"></div>
            <div class="col-sm-6">
              <button class="col-sm-3 mx-1" nbButton status="primary" type="submit">Save</button>
              <button class="col-sm-3 mx-1" type="button" nbButton (click)="refresh()">Refresh</button>
            </div>
          </div>
        </form>
      </nb-card-body>
    </nb-card>
  </div>
  <div>
    <nb-card class="medium">
      <nb-card-body>
        <div class="table-responsive">
          <table datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="table table-striped table-bordered table-hover">
            <thead>
              <tr>
                <th scope="col">SL</th>
                <th scope="col">MENU NAME</th>
                <th scope="col">URL</th>
                <th scope="col">Icon</th>
                <th scope="col">Is Parent</th>
                <th scope="col">Order No</th>
                <th scope="col">Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of menuList; let i = index">
                <th scope="row">{{ i + 1 }}</th>
                <td>{{ item.menuName }}</td>
                <td>{{ item.url }}</td>
                <td class="text-center"><nb-icon icon="{{ item.icon }}"></nb-icon></td>
                <td>{{ item.isParent }}</td>
                <td>{{ item.orderNo }}</td>
                <td>
                  <button nbButton shape="semi-round" size="small" status="primary" (click)="editMenu(item)"><nb-icon icon="edit-2-outline"></nb-icon></button>
                  &nbsp;
                  <button nbButton shape="semi-round" size="small" status="danger" (click)="deleteMenu(item.id)"><nb-icon icon="trash-2-outline"></nb-icon></button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </nb-card-body>
    </nb-card>
  </div>
</div>